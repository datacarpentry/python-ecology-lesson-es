<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Análisis y visualización de datos usando Python: Flujos de trabajo y automatización</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="manifest" href="../site.webmanifest"><link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav data"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Data Carpentry" src="../assets/images/data-logo.svg"></div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../06-loops-and-functions.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav data" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Data Carpentry" src="../assets/images/data-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Análisis y visualización de datos usando Python
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Análisis y visualización de datos usando Python
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="CONTRIBUTORS.html">Acerca de los Colaboradores</a></li><li><a class="dropdown-item" href="jupyter_notebooks.html">Resumen de Jupyter Notebooks</a></li><hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html"></a></li>
          </ul></li>
      </ul></div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled><input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset></form>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Análisis y visualización de datos usando Python
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 42%" class="percentage">
    42%
  </div>
  <div class="progress data">
    <div class="progress-bar data" role="progressbar" style="width: 42%" aria-valuenow="42" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../06-loops-and-functions.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-before-we-start.html">1. Antes de comenzar</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-short-introduction-to-Python.html">2. Breve introducción a la Programación en Python</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-starting-with-data.html">3. Comenzando con datos</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-index-slice-subset.html">4. Indexación, segmentación y creación de subconjuntos a partir de DataFrames en Python</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="04-data-types-and-format.html">5. Tipos de datos y formatos</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="05-merging-data.html">6. Combinando DataFrames con Pandas</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        7. Flujos de trabajo y automatización
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#bucles-for">Bucles <strong>for</strong></a></li>
<li><a href="#automatizando-el-procesamiento-de-datos-usando-bucles-for">Automatizando el procesamiento de datos usando bucles
<strong>For</strong></a></li>
<li><a href="#escribiendo-nombres-de-archivo-%C3%BAnicos">Escribiendo nombres de archivo únicos</a></li>
<li><a href="#construyendo-c%C3%B3digo-modular-y-reusable-usando-funciones">Construyendo código modular y reusable usando funciones</a></li>
<li><a href="#sentencias-if">Sentencias <strong>if</strong></a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="07-visualization-ggplot-python.html">8. Creando gráficos con plotnine</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="08-putting-it-all-together.html">9. Entrada de datos y visualización - Matplotlib y Pandas</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="09-working-with-sql.html">10. Acceso a base de datos SQLite usando Python y Pandas</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <li><a href="CONTRIBUTORS.html">Acerca de los Colaboradores</a></li><li><a href="jupyter_notebooks.html">Resumen de Jupyter Notebooks</a></li><hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html"></a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="../instructor/aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/05-merging-data.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/07-visualization-ggplot-python.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/05-merging-data.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Combinando
        </a>
        <a class="chapter-link float-end" href="../instructor/07-visualization-ggplot-python.html" rel="next">
          Next: Creando gráficos con... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Flujos de trabajo y automatización</h1>
        <p>Last updated on 2023-02-07 |
        
        <a href="https://github.com/datacarpentry/python-ecology-lesson-es/edit/main/episodes/06-loops-and-functions.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<p>Hasta este momento, hemos usado Python y la librería Pandas para
explorar y manipular <strong>datasets</strong> a mano, tal y como lo
haríamos en una planilla de cálculo. Sin embargo la belleza de usar un
lenguaje de programación como Python viene de la posibilidad de
automatizar el procesamiento de los datos a través del uso de bucles y
funciones.</p>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>¿Puedo automatizar operaciones en Python?</li>
<li>¿Qué son las función y por qué debería usarlas?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Describir por qué se usan los bucles en Python.</li>
<li>Usar bucles for para automatizar el análisis de datos.</li>
<li>Escribir nombres de archivo únicos en Python.</li>
<li>Construir código reusable en Python.</li>
<li>Escribir funciones usando condicionales (if, then, else).</li>
</ul></div>
</div>
</div>
</div>
</div>
<section id="bucles-for"><h2 class="section-heading">Bucles <strong>for</strong><a class="anchor" aria-label="anchor" href="#bucles-for"></a>
</h2>
<hr class="half-width"><p>Los bucles nos permiten repetir un flujo de trabajo (o una serie de
acciones) cierto número dado de veces o mientras una condición es
cierta. Podríamos usar un bucle para procesar automáticamente la
información que está contenida en múltiples archivos (valores diarios
con un archivo por año, por ejemplo). Los bucles nos alivian nuestra
tarea al hacer tareas repetitivas sin que tengamos que involucrarnos
directamente, y hace menos probable que introduzcamos errores al
equivocarnos mientras procesamos cada archivo manualmente.</p>
<p>Escribamos un bucle <strong>for</strong> sencillo que simule lo que
un niño podría ver durante una visita al zoológico:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'lion'</span>, <span class="st">'tiger'</span>, <span class="st">'crocodile'</span>, <span class="st">'vulture'</span>, <span class="st">'hippo'</span>]</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="bu">print</span>(animals)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['lion', 'tiger', 'crocodile', 'vulture', 'hippo']</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>    <span class="bu">print</span>(creature)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">lion</span></span>
<span><span class="va">tiger</span></span>
<span><span class="va">crocodile</span></span>
<span><span class="va">vulture</span></span>
<span><span class="va">hippo</span></span></code></pre>
</div>
<p>La línea que define el bucle debe comenzar con un
<strong>for</strong> y terminar con el caracter dos puntos, y el cuerpo
del bucle debe estar indentado.</p>
<p>Eh este ejemplo, <code>creature</code> es la variable del bucle que
toma el valor de la siguiente entrada en <code>animals</code> cada vez
que el bucle hace una iteración. Podemos darle a la variable del bucle
el nombre que querramos. Después que se termina el bucle, la variable
del bucle continuará existiendo y tendrá el valor de la última entrada
en la colección.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'lion'</span>, <span class="st">'tiger'</span>, <span class="st">'crocodile'</span>, <span class="st">'vulture'</span>, <span class="st">'hippo'</span>]</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="cf">pass</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The loop variable is now: '</span> <span class="op">+</span> creature)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The loop variable is now: hippo</code></pre>
</div>
<p>Acá no le estamos pidiendo a Python que imprima el valor de la
variable del bucle, pero el bucle todavía corre y el valor de
<code>creature</code> cambia en cada iteración. La palabra clave
<code>pass</code> en el cuerpo del bucle significa solamente “no hagas
nada”.</p>
<div id="desafío---bucles" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío---bucles" class="callout-inner">
<h3 class="callout-title">Desafío -<strong>Bucles</strong><a class="anchor" aria-label="anchor" href="#desaf%C3%ADo---bucles"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>¿Qué pasa si no incluimos la palabra clave
<code>pass</code>?</p></li>
<li><p>Reescribe el bucle de tal forma que los animales estén separados
por comas y no por una línea nueva. (Pista: Puedes concatenar cadenas de
caracteres usando el signo más. Por ejemplo,
<code>print(string1 + string2)</code> resulta en
‘string1string2’).</p></li>
</ol></div>
</div>
</div>
</section><section id="automatizando-el-procesamiento-de-datos-usando-bucles-for"><h2 class="section-heading">Automatizando el procesamiento de datos usando bucles
<strong>For</strong><a class="anchor" aria-label="anchor" href="#automatizando-el-procesamiento-de-datos-usando-bucles-for"></a>
</h2>
<hr class="half-width"><p>El archivo que hemos estado usando hasta este momento,
<code>surveys.csv</code>, contiene 25 años de información y es muy
grande. Nos encantaría separar esta información por años y guardar un
archivo por cada año.</p>
<p>Comencemos por crear un nuevo directorio en nuestra carpeta
<code>data</code> para guardar todos estos archivos usando el módulo
<code>os</code></p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>os.mkdir(<span class="st">'data/yearly_files'</span>)</span></code></pre>
</div>
<p>El comando <code>os.mkdir</code> es equivalente a escribir
<code>mkdir</code> en la terminal. Solo para estar seguros, podemos
verificar que nuestro nuevo directorio fue creado en la carpeta
<code>data</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>os.listdir(<span class="st">'data'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['plots.csv',
 'portal_mammals.sqlite',
 'species.csv',
 'survey2001.csv',
 'survey2002.csv',
 'surveys.csv',
 'surveys2002_temp.csv',
 'yearly_files']</code></pre>
</div>
<p>El comando <code>os.listdir</code> es equivalente a usar
<code>ls</code> en la terminal.</p>
<p>En episodios anteriores, vimos cómo usar la librería Pandas para
cargar en memoria, a través de <strong>DataFrame</strong>, información
sobre las especies; vimos cómo seleccionar un subconjunto de esos datos
usando ciertos criterios, y vimos también cómo escribir esa información
en un archivo CSV. Escribamos un <strong>script</strong> que realiza
esos tres pasos en secuencia para el año 2002:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co"># Cargamos los datos en un DataFrame</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>surveys_df <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co"># Seleccionamos solo los datos del año 2002</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>surveys2002 <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> <span class="dv">2002</span>]</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co"># Escribimos el nuevo DataFrame en un archivo CSV</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>surveys2002.to_csv(<span class="st">'data/yearly_files/surveys2002.csv'</span>)</span></code></pre>
</div>
<p>Para crear los archivos con los datos anuales, podemos repetir estos
últimos dos comandos una y otra vez, una vez por cada año de
información. Sin embargo, repetir código no es ni elegante ni práctico,
y hace muy probable que introduzcamos errores en nuestro código.
Queremos convertir lo que acabamos de escribir en un bucle que repita
estos últimos dos comandos para cada año en nuestro
<strong>dataset</strong>.</p>
<p>Comencemos con un bucle que solamente imprima los nombres de los
archivos que queremos crear - El dataset que estamos usando va desde
1977 hasta 2002, y vamos a crear un archivo por separado para cada año.
Listar los nombres de los archivos es una buena estrategia, porque así
podemos confirmar que nuestro bucle se está comportando como
esperamos.</p>
<p>Hemos visto que podemos iterar sobre una lista de elementos, entonces
necesitamos una lista de años sobre la cual iterar. Podemos obtener los
años en nuestro <strong>DataFrame</strong> con:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>surveys_df[<span class="st">'year'</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0        1977
1        1977
2        1977
3        1977
         ...
35545    2002
35546    2002
35547    2002
35548    2002</code></pre>
</div>
<p>pero queremos solamente años únicos, y esto lo podemos obtener usando
el método <code>unique</code> que ya hemos visto.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>surveys_df[<span class="st">'year'</span>].unique()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array([1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987,
       1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
       1999, 2000, 2001, 2002], dtype=int64)</code></pre>
</div>
<p>Escribiendo esto en un bucle <strong>for</strong> obtenemos</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> surveys_df[<span class="st">'year'</span>].unique():</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>   filename<span class="op">=</span><span class="st">'data/yearly_files/surveys'</span> <span class="op">+</span> <span class="bu">str</span>(year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>   <span class="bu">print</span>(filename)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1977.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1978.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1979.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1980.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1981.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1982.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1983.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1984.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1985.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1986.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1987.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1988.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1989.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1990.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1991.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1992.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1993.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1994.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1995.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1996.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1997.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1998.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1999.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys2000.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys2001.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys2002.csv</span></span></code></pre>
</div>
<p>Ahora podemos agregar el resto de pasos que necesitamos para crear
archivos separados:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># Load the data into a DataFrame</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>surveys_df <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> surveys_df[<span class="st">'year'</span>].unique():</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>    surveys_year <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> year]</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a CSV file</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'data/yearly_files/surveys'</span> <span class="op">+</span> <span class="bu">str</span>(year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a>    surveys_year.to_csv(filename)</span></code></pre>
</div>
<p>Mira dentro del directorio <code>yearly_files</code> y verifica un
par de los archivos que acabaste de crear para confirmar que todo
funcionó como esperabas.</p>
</section><section id="escribiendo-nombres-de-archivo-únicos"><h2 class="section-heading">Escribiendo nombres de archivo únicos<a class="anchor" aria-label="anchor" href="#escribiendo-nombres-de-archivo-%C3%BAnicos"></a>
</h2>
<hr class="half-width"><p>Nota que en el código anterior creamos un nombre de archivo único
para cada año.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>filename <span class="op">=</span> <span class="st">'data/yearly_files/surveys'</span> <span class="op">+</span> <span class="bu">str</span>(year) <span class="op">+</span> <span class="st">'.csv'</span></span></code></pre>
</div>
<p>Descompongamos las partes de este nombre:</p>
<ul><li>La primera parte es simplemente un texto que especifica el
directorio en el que vamos a guardar nuestro archivo
(data/yearly_files/) y la primera parte del nombre del archivo
(surveys): <code>'data/yearly_files/surveys'</code>
</li>
<li>Podemos concatenar esto con el valor de una variable, en este caso
<code>year</code>, al usar el signo más y la variable que le queremos
añadir al nombre del archivo: <code>+ str(year)</code>
</li>
<li>Por último añadimos la extensión del archivo usando otra cadena de
caracteres: <code>+ '.csv'</code>
</li>
</ul><p>Nota que usamos comillas sencillas para añadir las cadenas de
caracteres y que la variable no está entre comillas. Este código produce
la cadena de caracteres <code>data/yearly_files/surveys2002.csv</code>
que contiene tanto el <strong>path</strong> como el nombre del
archivo.</p>
<div id="desafío---modificando-bucles" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío---modificando-bucles" class="callout-inner">
<h3 class="callout-title">Desafío - Modificando bucles<a class="anchor" aria-label="anchor" href="#desaf%C3%ADo---modificando-bucles"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>Algunas de las encuestas que guardaste tienen datos faltantes
(tienen valores nulos que salen como <code>NaN</code> - No es un número
(en inglés) - en los DataFrames y no salen en los archivos de texto).
Modifica el bucle <strong>for</strong> para que las entradas que tengan
valores nulos no sean incluidas en los archivos anuales.</p></li>
<li><p>Supongamos que solo quieres revisar los datos cada cierto
múltiplo de años. ¿Cómo modificarías el bucle para generar un archivo de
datos cada cinco años comenzando desde 1977?</p></li>
<li><p>En vez de separar la información por años, un colega tuyo quiere
hacer el análisis separando por especies. ¿Cómo escribirías un único
archivo CSV por cada especie?</p></li>
</ol></div>
</div>
</div>
</section><section id="construyendo-código-modular-y-reusable-usando-funciones"><h2 class="section-heading">Construyendo código modular y reusable usando funciones<a class="anchor" aria-label="anchor" href="#construyendo-c%C3%B3digo-modular-y-reusable-usando-funciones"></a>
</h2>
<hr class="half-width"><p>Supón que separar archivos enormes en archivos anuales individuales
es una tarea que tenemos que realizar frecuentemente. Podríamos escribir
un bucle <strong>for</strong> como el que hicimos arriba cada vez que lo
necesitemos, pero esto tomaría mucho tiempo y podría introducir errores
en el código. Una solución más elegante sería crear una herramienta
reusable que realice esta tarea con el mínimo esfuerzo del usuario. Para
hacerlo, vamos a convertir el código que ya escribimos en una
función.</p>
<p>Las funciones son piezas de código reusable y autónomo que pueden ser
llamadas mediante un solo comando. Están diseñadas para aceptar
argumentos como entrada y retornar valores, pero no necesitan hacerlo
necesariamente. Las variables declaradas adentro de las funciones solo
existen mientras la función se está ejecutando, y si una variable
adentro de una función (una variable local) tiene el mismo nombre de
otra variable en alguna parte del código, la variable local no
sobrescribe a la otra.</p>
<p>Todo método usado en Python (como por ejemplo <code>print</code>) es
una función, y las librerías que importamos (<code>pandas</code>, por
ejemplo) son una colección de funciones. Solo usaremos las funciones que
están contenidas en el mismo código que las usan, pero es sencillo
también escribir funciones que puedan ser usadas por programas
diferentes.</p>
<p>Las funciones se declaran usando la siguiente estructura general:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">def</span> this_is_the_function_name(input_argument1, input_argument2):</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>    <span class="co"># El cuerpo de la función está indentado</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="co"># Esta función imprime los dos argumentos en pantalla</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The function arguments are:'</span>, input_argument1, input_argument2, <span class="st">'(this is done inside the function!)'</span>)</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>    <span class="co"># And returns their product</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>    <span class="cf">return</span> input_argument1 <span class="op">*</span> input_argument2</span></code></pre>
</div>
<p>La declaración de la función comienza con la palabra clave
<code>def</code>, seguida del nombre de la función y los argumentos
entre paréntesis, y termina con un dos puntos. El cuerpo de la función
está indentado justo como ocurría con los bucles. Si la función retorna
algo al ser llamada, entonces incluimos la palabra clave
<code>return</code> al final.</p>
<p>Así es como llamamos a la función:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>product_of_inputs <span class="op">=</span> this_is_the_function_name(<span class="dv">2</span>,<span class="dv">5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The function arguments are: 2 5 (this is done inside the function!)</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Their product is:'</span>, product_of_inputs, <span class="st">'(this is done outside the function!)'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Their product is: 10 (this is done outside the function!)</code></pre>
</div>
<div id="desafío---funciones" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío---funciones" class="callout-inner">
<h3 class="callout-title">Desafío - Funciones<a class="anchor" aria-label="anchor" href="#desaf%C3%ADo---funciones"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li>Cambia los valores de los argumentos en la función y mira su
salida.</li>
<li>Intenta llamar a la función usando la cantidad equivocada de
argumentos (es decir, diferente de 2) o sin asignar la llamada de la
función a una variable (sin poner
<code>product_of_inputs =</code>).</li>
<li>Declara una variable dentro de una función y prueba a encontrar en
dónde existe (Pista: ¿puedes imprimirla desde fuera de la función?)</li>
<li>Explora qué sucede cuando una variable tiene el mismo nombre adentro
y afuera de la función. ¿Qué le ocurre a la variable global cuando
cambias el valor de la variable local?</li>
</ol></div>
</div>
</div>
<p>Ahora podemos convertir el código para guardar archivos con datos
anuales en una función. Hay muchas “partes” de este código que podemos
convertir en funciones, y podríamos inclusive crear funciones que llaman
a otras funciones adentro de ellas. Comencemos escribiendo una función
que separa los datos para un año y los guarda en un archivo:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data):</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="co">    Escribe un archivo csv con los datos para un año dado.</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="co">    this_year --- el año del que vamos a extraer los datos</span></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a><span class="co">    all_data --- DataFrame con datos de múltiples años</span></span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a>    <span class="co"># Seleccionamos los datos para el año</span></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a>    <span class="co"># Escribimos el nuevo DataFrame a un archivo csv</span></span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'data/yearly_files/function_surveys'</span> <span class="op">+</span> <span class="bu">str</span>(this_year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a>    surveys_year.to_csv(filename)</span></code></pre>
</div>
<p>El texto que está entre los dos grupos de tres comillas dobles se
llama el <strong>docstring</strong> y contiene la documentación de la
función. No hace nada al ejecutar la función y por tanto no es
necesario, pero es una excelente práctica incluir docstrings para
recordar y explicar qué hace el código. Los docstrings en las funciones
también se vuelven parte de la documentación “oficial”:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>one_year_csv_writer?</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>one_year_csv_writer(<span class="dv">2002</span>, surveys_df)</span></code></pre>
</div>
<p>Cambiamos el nombre del archivo CSV para diferenciarlo del que
escribimos anteriormente. Busca en el directorio
<code>yearly_files</code> el archivo que creamos. ¿Hizo la función lo
que esperabas que hiciera?</p>
<p>Sin embargo, lo que nos encantaría hacer es crear archivos para
múltiples años sin tener que pedirlos uno a uno. Escribamos otra función
que reemplace el bucle <strong>for</strong> simplemente iterando a
través de la secuencia de años y llamando repetidamente a la función que
acabamos de escribir, <code>one_year_csv_writer</code>:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_csv_writer(start_year, end_year, all_data):</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="co">    Escribe archivos CSV separados para cada año de datos.</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="co">    start_year --- el primer año de datos que queremos</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a><span class="co">    end_year --- el último año de datos que queremos</span></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a><span class="co">    all_data --- DataFrame con datos de varios años</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a>    <span class="co"># "end_year" es el último año que queremos extraer, entonces iteramos hasta end_year+1</span></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(start_year, end_year<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a>        one_year_csv_writer(year, all_data)</span></code></pre>
</div>
<p>Como la gente esperará naturalmente que el año final
(<code>end_year</code>) sea el último, el bucle <strong>for</strong>
adentro de la función termina en <code>end_year + 1</code>. Al escribir
el bucle entero en la función, hemos hecho una herramienta reusable para
cuando necesitemos partir un archivo de datos grande en archivos
anuales. Como podemos especificar el primer y el último año para los
cuales queremos crear archivos, podemos inclusive usar esta función para
crear archivos para un subconjunto de los años disponibles. Así
llamaríamos la función:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="co"># Cargamos los datos en un DataFrame</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>surveys_df <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="co"># Creamos los archivos CSV</span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>yearly_data_csv_writer(<span class="dv">1977</span>, <span class="dv">2002</span>, surveys_df)</span></code></pre>
</div>
<p>¡TEN CUIDADO! Si estás usando Jupyter Notebooks y estás modicando la
función, DEBES volver a ejecutar la celda para que la función cambiada
esté disponible para el resto del código. Nada cambiará visualmente
cuando hagas esto, porque definir una función sin <em>ejecutarla</em> no
produce ninguna salida. Toda otra celda que use la función (ahora
cambiada) también tendrá que ser re-ejecutada para cambiar su
salida.</p>
<div id="challenge--más-funciones" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge--más-funciones" class="callout-inner">
<h3 class="callout-title">Challenge- Más funciones<a class="anchor" aria-label="anchor" href="#challenge--m%C3%A1s-funciones"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li>Añade dos argumentos a las funciones que escribimos que tomen el
<strong>path</strong> del directorio donde los archivos serán escritos y
el root del nombre del archivo. Crea un nuevo conjunto de archivos con
un nombre diferente en un directorio diferente.</li>
<li>¿Cómo podrías usar la función <code>yearly_data_csv_writer</code>
para crear un archivo CSV para solo un año? (Pista: piensa sobre la
sintaxis para <code>range</code>)</li>
<li>Haz que las funciones retornen una lista de los archivos que
escribieron. Hay muchas formas en las que puedes hacer esto (¡y deberías
intentarlas todas!): cualquiera de las dos funciones podría imprimir
algo en pantalla, cualquiera podría usar <code>return</code> para
retornar números o cadenas de caracteres cada vez que se llaman, o
podrías hacer una combinación de estas dos estrategias. Podrías también
intentar usar la librería <code>os</code> para listar los contenidos de
directorios.</li>
<li>Explora qué sucede cuando las variables son declaradas dentro de
cada una de las funciones versus en el cuerpo principal de tu código (lo
que está sin indentar). ¿Cuál es el alcance de las variables (es decir,
dónde son visibles)?, ¿qué ocurre si tienen el mismo nombre pero valores
diferentes?</li>
</ol></div>
</div>
</div>
<p>Las funciones que escribimos exigen que les demos un valor para cada
argumento. Idealmente, nos gustaría que estas funciones fuesen tan
flexibles e independientes como fuera posible. Modifiquemos la función
<code>yearly_data_csv_writer</code> para que <code>start_year</code> y
<code>end_year</code> sean por defecto el rango completo de los datos si
no son dados por el usuario. Se le pueden asignar a los argumentos
valores por defecto usando el signo igual a la hora de declarar la
función. Todos los argumentos en la función que no tengan un valor por
defecto (como aquí <code>all_data</code>) serán argumentos requeridos y
DEBERÁN ir antes de los argumentos que tengan valores por defecto (y que
son opcionales al llamar la función).</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_arg_test(all_data, start_year <span class="op">=</span> <span class="dv">1977</span>, end_year <span class="op">=</span> <span class="dv">2002</span>):</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="co">    Modificación de yearly_data_csv_writer para probar argumentos con valores</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co">    por defecto!</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="co">    start_year --- el primer año de datos que queremos --- por defecto: 1977</span></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="co">    end_year --- el último año de datos que queremos --- por defecto: 2002</span></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="co">    all_data --- DataFrame con datos de varios años</span></span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a>    <span class="cf">return</span> start_year, end_year</span>
<span id="cb31-12"><a href="#cb31-12" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" tabindex="-1"></a></span>
<span id="cb31-14"><a href="#cb31-14" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df, <span class="dv">1988</span>, <span class="dv">1993</span>)</span>
<span id="cb31-15"><a href="#cb31-15" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both optional arguments:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb31-16"><a href="#cb31-16" tabindex="-1"></a></span>
<span id="cb31-17"><a href="#cb31-17" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df)</span>
<span id="cb31-18"><a href="#cb31-18" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Default values:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Both optional arguments:	1988 1993
Default values:		1977 2002</code></pre>
</div>
<p>Los “\t” en <code>print</code> son tabulaciones, y son usadas para
alinear el texto y facilitar la lectura.</p>
<p>Pero ¿qué sucede si nuestro <strong>dataset</strong> no comienza en
1977 ni termina en 2002? Podemos modificar la función de tal forma que
ella misma mire cuál es el primer y cuál es el último año si estos
argumentos no son provistos por el usuario:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_arg_test(all_data, start_year <span class="op">=</span> <span class="va">None</span>, end_year <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="co">    Modificación de yearly_data_csv_writer para probar argumentos con valores</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="co">    por defecto!</span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="co">    start_year --- el primer año de datos que queremos --- por defecto: None - revisar all_data</span></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="co">    end_year --- el último año de datos que queremos --- por defecto: None - revisar all_data</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a><span class="co">    all_data --- DataFrame con datos de varios años</span></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a>    <span class="cf">if</span> start_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb33-12"><a href="#cb33-12" tabindex="-1"></a>        start_year <span class="op">=</span> <span class="bu">min</span>(all_data.year)</span>
<span id="cb33-13"><a href="#cb33-13" tabindex="-1"></a>    <span class="cf">if</span> end_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb33-14"><a href="#cb33-14" tabindex="-1"></a>        end_year <span class="op">=</span> <span class="bu">max</span>(all_data.year)</span>
<span id="cb33-15"><a href="#cb33-15" tabindex="-1"></a></span>
<span id="cb33-16"><a href="#cb33-16" tabindex="-1"></a>    <span class="cf">return</span> start_year, end_year</span>
<span id="cb33-17"><a href="#cb33-17" tabindex="-1"></a></span>
<span id="cb33-18"><a href="#cb33-18" tabindex="-1"></a></span>
<span id="cb33-19"><a href="#cb33-19" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df, <span class="dv">1988</span>, <span class="dv">1993</span>)</span>
<span id="cb33-20"><a href="#cb33-20" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both optional arguments:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb33-21"><a href="#cb33-21" tabindex="-1"></a></span>
<span id="cb33-22"><a href="#cb33-22" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df)</span>
<span id="cb33-23"><a href="#cb33-23" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Default values:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Both optional arguments:	1988 1993
Default values:		1977 2002</code></pre>
</div>
<p>Ahora los valores por defecto de los argumentos
<code>start_year</code> y <code>end_year</code> en la función
<code>yearly_data_arg_test</code> son <code>None</code>. Esta es una
constante incorporada en Python que indica la ausencia de un valor -
esencialmente indica que la variable existe en el directorio de nombres
de variables (el <strong>namespace</strong>) de la función pero que no
corresponde a ningún objeto existente.</p>
<div id="challenge---variables" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge---variables" class="callout-inner">
<h3 class="callout-title">Challenge - Variables<a class="anchor" aria-label="anchor" href="#challenge---variables"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>¿Qué tipo de objeto corresponde a una variable declarada como
<code>None</code>? (Pista: crea una variable con el valor
<code>None</code> y usa la función <code>type()</code>)</p></li>
<li><p>Compara el comportamiento de la función
<code>yearly_data_arg_test</code> cuando los argumentos tienen
<code>None</code> como valor por defecto y cuando no tienen valores por
defecto.</p></li>
<li><p>¿Qué ocurre si solo incluimos un valor para
<code>start_year</code> al llamar a la función?, ¿puedes escribir una
llamada a la función con solo un valor para <code>end_year</code>?
(Pista: piensa en cómo la función debe estar asignándole valores a cada
uno de sus argumentos - ¡esto está relacionado con la necesidad de poner
los argumentos que no tienen valores por defecto antes de los que sí
tienen valores por defecto en la definición de la función!)</p></li>
</ol></div>
</div>
</div>
</section><section id="sentencias-if"><h2 class="section-heading">Sentencias <strong>if</strong><a class="anchor" aria-label="anchor" href="#sentencias-if"></a>
</h2>
<hr class="half-width"><p>El cuerpo de la función anterior ahora tiene dos condicionales
<strong>if</strong> que revisan los valores de <code>start_year</code> y
<code>end_year</code>. Los condicionales if ejecutan un segmento de
código si una condición dada es cierta. Usualmente lucen así:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="cf">if</span> a<span class="op">&lt;</span><span class="dv">0</span>:  <span class="co"># ¿es cierta esta primera condición?</span></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>    <span class="co"># si a ES menor que cero</span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a is a negative number'</span>)</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a><span class="cf">elif</span> a<span class="op">&gt;</span><span class="dv">0</span>:  <span class="co"># La primera condición no es cierta, ¿la segunda?</span></span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>    <span class="co"># si a NO ES menor que cero y ES mayor que cero</span></span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a is a positive number'</span>)</span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a><span class="cf">else</span>:  <span class="co"># No se cumplieron las dos condiciones</span></span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a>    <span class="co"># si a NO ES menor que cero y NO ES mayor que cero</span></span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a must be zero!'</span>)</span></code></pre>
</div>
<p>lo cual retornaría:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>a is a positive number</code></pre>
</div>
<p>Cambia los valores de <code>a</code> para ver cómo funciona este
código. La palabra clave <code>elif</code> significa “sino” (en inglés,
“else if”), y todos los condicionales deben terminar con un dos
puntos.</p>
<p>Los condicionales if en la función <code>yearly_data_arg_test</code>
verifican si hay algún objeto asociado a los nombres
<code>start_year</code> y <code>end_year</code>. Si estas variables son
<code>None</code>, los condicionales if retornan el booleano
<code>True</code> y ejecutan cualquier cosa que esté en su cuerpo. Por
otra parte, si los nombres están asociados a algún valor (es decir,
recibieron un número al ser llamada la función), los condicionales if
retornarán <code>False</code> y no ejecutan su cuerpo. El condicional
opuesto, que retornaría <code>True</code> si las variables estuvieran
asociadas con objetos (es decir, si hubieran recibido valores al
llamarse la función), sería <code>if start_year</code> y
<code>if end_year</code>.</p>
<p>Tal y como la hemos escrito hasta este momento, la función
<code>yearly_data_arg_test</code> asocia los valores que le pasamos
cuando la llamamos con los argumentos en la definición de la función
solo basados en su orden. Si la función recibe solo dos valores al ser
llamada, el primero será asociado con <code>all_data</code> y el segundo
con <code>start_year</code>, sin importar cuál era nuestra intención.
Podemos solucionar este problema al llamar la función usando argumentos
<strong>keyword</strong>, en donde cada uno de los argumentos en la
definición de la función está asociado con una <strong>keyword</strong>
y al llamar la función pasamos valores a los parámetros usando estas
keywords:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df)</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Default values:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df, <span class="dv">1988</span>, <span class="dv">1993</span>)</span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'No keywords:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df, start_year <span class="op">=</span> <span class="dv">1988</span>, end_year <span class="op">=</span> <span class="dv">1993</span>)</span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both keywords, in order:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df, end_year <span class="op">=</span> <span class="dv">1993</span>, start_year <span class="op">=</span> <span class="dv">1988</span>)</span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both keywords, flipped:</span><span class="ch">\t\t</span><span class="st">'</span>, start, end)</span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df, start_year <span class="op">=</span> <span class="dv">1988</span>)</span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'One keyword, default end:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a></span>
<span id="cb37-16"><a href="#cb37-16" tabindex="-1"></a>start,end <span class="op">=</span> yearly_data_arg_test (surveys_df, end_year <span class="op">=</span> <span class="dv">1993</span>)</span>
<span id="cb37-17"><a href="#cb37-17" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'One keyword, default start:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Default values:		1977 2002
No keywords:		1988 1993
Both keywords, in order:	1988 1993
Both keywords, flipped:	1988 1993
One keyword, default end:	1988 2002
One keyword, default start:	1977 1993</code></pre>
</div>
<div id="desafío---modificando-funciones" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío---modificando-funciones" class="callout-inner">
<h3 class="callout-title">Desafío - Modificando funciones<a class="anchor" aria-label="anchor" href="#desaf%C3%ADo---modificando-funciones"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>Reescribe las funciones <code>one_year_csv_writer</code> y
<code>yearly_data_csv_writer</code> para que tengan argumentos keyword
con valores por defecto.</p></li>
<li><p>Modifica las funciones de tal forma que no creen archivos para un
año si éste no está en los datos y que muestre una alerta al usuario
(Pista: usa condicionales para esto. Si quieres un reto más, ¡usa
<code>try</code>!)</p></li>
<li><p>Este código verifica si un directorio existe, sino lo crea. Añade
un poco de código a la función que escribe los archivos CSV para
verificar si existe el directorio al que piensas escribir.</p></li>
</ol><div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="cf">if</span> <span class="st">'dir_name_here'</span> <span class="kw">in</span> os.listdir(<span class="st">'.'</span>):</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>   <span class="bu">print</span>(<span class="st">'Processed directory exists'</span>)</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>   os.mkdir(<span class="st">'dir_name_here'</span>)</span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>   <span class="bu">print</span>(<span class="st">'Processed directory created'</span>)</span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal"><li>El código que has escrito hasta este momento usando el bucle
<strong>for</strong> está bastante bien, pero no necesariamente es
reproducible con <strong>datasets</strong> diferentes. Por ejemplo, ¿qué
pasa con el código si tenemos datos para más años? Usando las
herramientas que aprendiste en las actividades anteriores, crea una
lista de todos los años representados en los datos. Después crea un
bucle para procesar tu información, comenzando desde el primer año y
terminando en el último usando la lista. (Pista: puedes crear un bucle
con la lista así: <code>for years in year_list:</code>)</li>
</ol></div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Los bucles nos permiten repetir una serie de acciones un número dado
de veces o mientras una condición es cierta.</li>
<li>Podemos automatizar tareas que se deben repetir un número
predefinido de veces utilizando bucles <code>for</code>.</li>
<li>Una tarea de automatización típica en programación es generar
secuencias de archivos con nombres distinos que siguen un patrón, esto
se puede realizar fácilmente manipulando cadenas de caracteres con el
nombre de los archivos dentro de bucles de repetición a medida que se
van creando.</li>
<li>Es conveniente definir funciones para establecer bloques de código
reutilizables. Las funciones se pueden diseñar para que acepten
argumentos de entradas para generalizar su funcionalidad y devolver
distintos tipos de resultados.</li>
<li>Las sentencias <code>if</code> permiten elegir cuales bloques de
código ejecutar según según se cumplan o no distintas condiciones.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/05-merging-data.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/07-visualization-ggplot-python.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/05-merging-data.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Combinando
        </a>
        <a class="chapter-link float-end" href="../instructor/07-visualization-ggplot-python.html" rel="next">
          Next: Creando gráficos con... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/datacarpentry/python-ecology-lesson-es/edit/main/episodes/06-loops-and-functions.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/datacarpentry/python-ecology-lesson-es/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/datacarpentry/python-ecology-lesson-es/" class="external-link">Source</a></p>
				<p><a href="https://github.com/datacarpentry/python-ecology-lesson-es/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.3" class="external-link">sandpaper (0.16.3)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.4" class="external-link">pegboard (0.7.4)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.1" class="external-link">varnish (1.0.1)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://datacarpentry.org/python-ecology-lesson-es/instructor/06-loops-and-functions.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Flujos de trabajo y automatización",
  "creativeWorkStatus": "active",
  "url": "https://datacarpentry.org/python-ecology-lesson-es/instructor/06-loops-and-functions.html",
  "identifier": "https://datacarpentry.org/python-ecology-lesson-es/instructor/06-loops-and-functions.html",
  "dateCreated": "2018-11-09",
  "dateModified": "2023-02-07",
  "datePublished": "2024-04-09"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

