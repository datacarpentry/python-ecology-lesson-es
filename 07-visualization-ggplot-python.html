<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="es" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Análisis y visualización de datos usando Python: Creando gráficos con plotnine</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/dc/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/dc/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/dc/favicon-16x16.png"><link rel="manifest" href="favicons/dc/site.webmanifest"><link rel="mask-icon" href="favicons/dc/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav data"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Ir al contenido principal</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="dc-logo" alt="Data Carpentry" src="assets/images/data-logo.svg"></div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Vista de estudiante <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/07-visualization-ggplot-python.html';">Vista de la instructora</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav data" aria-label="Navegación principal"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Alternar navegación">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menú</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Data Carpentry" src="assets/images/data-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Análisis y visualización de datos usando Python
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Buscar en la página All In One" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Análisis y visualización de datos usando Python
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Puntos Clave</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glosario</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Perfiles de estudiante</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Más <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html"></a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Buscar en la página All In One"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Buscar en la página All In One">Buscar en la página All In One</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Análisis y visualización de datos usando Python
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 58%" class="percentage">
    58%
  </div>
  <div class="progress data">
    <div class="progress-bar data" role="progressbar" style="width: 58%" aria-valuenow="58" aria-label="Progreso de la lección" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="Cerrar menú" alt="Cerrar menú" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Cerrar " data-episodes="Episodios ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Vista de estudiante
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/07-visualization-ggplot-python.html">Vista de la instructora</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODIOS
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Resumen y configuración</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-before-we-start.html">1. Antes de comenzar</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-short-introduction-to-Python.html">2. Breve introducción a la Programación en Python</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-starting-with-data.html">3. Comenzando con datos</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-index-slice-subset.html">4. Indexación, segmentación y creación de subconjuntos a partir de DataFrames en Python</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="04-data-types-and-format.html">5. Tipos de datos y formatos</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="05-merging-data.html">6. Combinando DataFrames con Pandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="06-loops-and-functions.html">7. Flujos de trabajo y automatización</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        8. Creando gráficos con plotnine
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#creando-gr%C3%A1ficos-con-plotnine">Creando gráficos con plotnine</a></li>
<li><a href="#construyendo-tus-gr%C3%A1ficos-de-forma-iterativa">Construyendo tus gráficos de forma iterativa</a></li>
<li><a href="#gr%C3%A1ficos-de-distribuciones">Gráficos de distribuciones</a></li>
<li><a href="#gr%C3%A1ficos-de-series">Gráficos de series</a></li>
<li><a href="#facetas">Facetas</a></li>
<li><a href="#m%C3%A1s-retoques">Más retoques</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="08-putting-it-all-together.html">9. Entrada de datos y visualización - Matplotlib y Pandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="09-working-with-sql.html">10. Acceso a base de datos SQLite usando Python y Pandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RECURSOS
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Puntos Clave</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glosario</a>
                      </li>
                      <li>
                        <a href="profiles.html">Perfiles de estudiante</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html"></a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">Todo en una sola página</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Capítulo previo y siguiente"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-loops-and-functions.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previo</a>
        <a class="chapter-link float-end" href="08-putting-it-all-together.html">Siguiente<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-loops-and-functions.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previo: Flujos de trabajo y
        </a>
        <a class="chapter-link float-end" href="08-putting-it-all-together.html" rel="next">
          Siguiente: Entrada de datos y...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Creando gráficos con plotnine</h1>
        <p>Última actualización: 2023-02-07 |

        <a href="https://github.com/datacarpentry/python-ecology-lesson-es/edit/main/episodes/07-visualization-ggplot-python.md" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="section level3">
<h3 id="nota">Nota<a class="anchor" aria-label="anchor" href="#nota"></a></h3>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul><li>¿Cómo puedo visualizar datos en Python?</li>
<li>¿Qué es la ‘gramática de gráficos’?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul><li>Crear un objeto <code>plotnine</code>.</li>
<li>Establecer configuraciones para gráficos.</li>
<li>Modificar un objeto <code>plotnine</code> existente.</li>
<li>Cambiar la estética de un gráfico, como el color.</li>
<li>Editar las etiquetas de los ejes.</li>
<li>Construir gráficos complejos paso a paso.</li>
<li>Crear gráficos de dispersión, gráficos de caja y gráficos de
series.</li>
<li>Usar los comandos <code>facet_wrap</code> y <code>facet_grid</code>
para crear una colección de gráficos que dividen los datos por una
variable categórica.</li>
<li>Crear estilos personalizados para tus gráficos.</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>Python tiene muy buenos recursos para crear gráficos incorporados en
el paquete <code>matplotlib</code>, pero para éste episodio,
utilizaremos el paquete [<code>plotnine</code>] (<a href="https://plotnine.readthedocs.io/en/stable/" class="external-link">https://plotnine.readthedocs.io/en/stable/</a>),
que facilita la creación de gráficos informativos usando datos
estructurados. El paquete <code>plotnine</code> está basado en la
implementación R de <a href="https://ggplot2.org/" class="external-link"><code>ggplot2</code></a> y <a href="https://link.springer.com/book/10.1007%2F0-387-28695-0" class="external-link">La
gramática de gráficos</a> por Leland Wilkinson. Además el paquete <a href="https://plotnine.readthedocs.io/en/stable/" class="external-link"><code>plotnine</code></a>
está construido sobre <code>matplotlib</code> e interactúa bien con
<code>Pandas</code>.</p>
<p>Al igual que con los otros paquetes, <code>plotnine</code> necesita
ser importado. Es bueno practicar usando una abreviatura como usamos
<code>pd</code> para <code>Pandas</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="op">%</span>matplotlib inline</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="im">import</span> plotnine <span class="im">as</span> p9</span></code></pre>
</div>
<p>Desde ahora todas las funciones de <code>plotnine</code> se pueden
acceder usando <code>p9.</code> por delante.</p>
<p>Para los ejercicios usaremos los datos de <code>surveys.csv</code>
descartando los valores <code>NA</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>surveys_complete <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>surveys_complete <span class="op">=</span> surveys_complete.dropna()</span></code></pre>
</div>
</div>
<section><h2 class="section-heading" id="creando-gráficos-con-plotnine">Creando gráficos con plotnine<a class="anchor" aria-label="anchor" href="#creando-gr%C3%A1ficos-con-plotnine"></a></h2>
<hr class="half-width"><p>El paquete <code>plotnine</code> (es parte de <a href="https://link.springer.com/book/10.1007%2F0-387-28695-0" class="external-link">La
gramática de gráficos</a>) se usa para la creación de gráficos complejos
a partir de los datos en un <code>DataFrame</code>. Utiliza
configuraciones por defecto que ayudan a crear gráficos con calidad de
publicación con unos pocos ajustes.</p>
<p>Los gráficos <code>plotnine</code> se construyen paso a paso
agregando nuevos elementos uno encima del otro usando el operador
<code>+</code>. Poniendo cada paso entre paréntesis <code>()</code>
proporciona una sintaxis compatible con Python.</p>
<p>Para construir un gráfico <code>plotnine</code> necesitamos:</p>
<ul><li>Conectar el gráfico a un <code>DataFrame</code> específico usando el
argumento <code>data</code>:</li>
</ul><div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete))</span></code></pre>
</div>
<p>Como no hemos definido nada más, sólo se presenta un marco vacío para
el gráfico.</p>
<ul><li>Define las opciones del gráfico usando <code>mapping</code> y
estéticas <code>aes</code>, para <strong>seleccionar las
variables</strong> que quieres mostrar en el gráfico, y definir la
presentación de estas variables, como tamaño, color, forma, etc. Las
ésteticas más importantes son: <code>x</code>,<code>y</code>,
<code>alpha</code>,<code>color</code> o <code>colour</code>,
<code>fill</code>,<code>linetype</code>,
<code>shape</code>,<code>size</code> y <code>stroke</code>.</li>
</ul><div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>)))</span></code></pre>
</div>
<ul><li>Todavía no tenemos un gráfico, primero tenemos que definir qué tipo
de geometría utilizar. Puedes interpretar ésto como: las variables que
se usan en el gráfico son las que serán modificadas por objetos o
geometrías. Lo más sencillo es probablemente usar puntos.
<code>geom_point</code> es una de las opciones de geometría
<code>geoms</code>, que define la representación gráfica de los datos.
Otras geometrías son <code>geom_line</code>, <code>geom_bar</code>, etc.
Para agregar un <code>geom</code> al gráfico usa el símbolo
<code>+</code>:</li>
</ul><div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>))</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point()</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>)</span></code></pre>
</div>
<p>El símbolo <code>+</code> en el paquete <code>plotnine</code> es
particularmente útil porque te permite modificar los objetos
<code>plotnine</code> existentes. Esto significa que puedes configurar
fácilmente el gráfico con <em>plantillas</em> y explorar
convenientemente diferentes tipos de gráficos. El gráfico anterior
también se puede generar con código como este:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Crea un marco para el gráfico definiendo las variables</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>surveys_plot <span class="op">=</span> p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                         mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>))</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co"># Dibuja los puntos en el marco</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>surveys_plot <span class="op">+</span> p9.geom_point()</span></code></pre>
</div>
<figure><img src="fig/06_first_plot.png" alt="Gráfica de distribución de la longitud de las patas de animales contra su peso donde los puntos están aglomerados en el cuadrante inferior izquierdo" class="figure mx-auto d-block"></figure><div id="desafío---gráfico-de-barras" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío---gráfico-de-barras" class="callout-inner">
<h3 class="callout-title">Desafío - gráfico de barras</h3>
<div class="callout-content">
<p>Trabajando con los datos de <code>survey_complete</code>, usa la
columna <code>plot-id</code> para crear un gráfico de barras
<code>geom_bar</code> que cuente el número de registros para cada
parcela. (Mira la documentación de la geometría de barras para manejar
los conteos).</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Respuestas
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'plot_id'</span>))</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_bar()</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_challenge_bar.png" alt="png" class="figure mx-auto d-block"></figure></div>
</div>
</div>
</div>
<p>Notas:</p>
<ul><li>Cualquier ajuste en la función <code>ggplot()</code> se visualiza en
las capas del gráfico (por ejemplo, las configuraciones universales).
Esto incluye los ejes <code>x</code> y <code>y</code> que configuraste
en las capa de estéticas <code>aes()</code>.</li>
<li>También puedes especificar estéticas individuales para cada
<code>geom</code> independientemente de las estéticas definidas
globalmente en la función <code>ggplot()</code>.</li>
</ul></section><section><h2 class="section-heading" id="construyendo-tus-gráficos-de-forma-iterativa">Construyendo tus gráficos de forma iterativa<a class="anchor" aria-label="anchor" href="#construyendo-tus-gr%C3%A1ficos-de-forma-iterativa"></a></h2>
<hr class="half-width"><p>La construcción de gráficos con <code>plotnine</code> es típicamente
un proceso iterativo. Empezamos definiendo el conjunto de datos que
usaremos, colocaremos los ejes y elegiremos una geometría. Por lo tanto,
los elementos mínimos de cualquier gráfico son
<code>data</code>,<code>aes</code> y <code>geom-*</code>:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>))</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point()</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>)</span></code></pre>
</div>
<p>Luego, comenzamos a modificar este gráfico para extraer más
información. Por ejemplo, podemos agregar transparencia
(<code>alfa</code>) para evitar la obstrucción visual por aglomeración
de puntos:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>))</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_alpha_plot.png" alt="Gráfica de distribución de la longitud de las patas de animales contra su peso donde los puntos tienen transparencia para evitar la aglomeración" class="figure mx-auto d-block"></figure><p>¡También puedes agregar color a los puntos!</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>))</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_blue_plot.png" alt="Gráfica de distribución de la longitud de las patas de animales contra su peso donde los puntos son azules" class="figure mx-auto d-block"></figure><p>Si quieres usar un color diferente para cada especie, tienes que
conectar la columna <code>species_id</code> con la estética del
color:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>,</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'hindfoot_length'</span>,</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>                          color<span class="op">=</span><span class="st">'species_id'</span>))</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_color_plot.png" alt="png" class="figure mx-auto d-block"></figure><p>Aparte de las configuraciones en los argumentos <code>data</code>,
<code>aes</code> y los elementos <code>geom-*</code>, también se pueden
agregar elementos adicionales, usando el signo <code>+</code>:</p>
<ul><li>Cambiando las etiquetas:</li>
</ul><div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>, color<span class="op">=</span><span class="st">'species_id'</span>))</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    <span class="op">+</span> p9.xlab(<span class="st">"Weight (g)"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_color_label_plot.png" alt="png" class="figure mx-auto d-block"></figure><ul><li>Puedes también cambiar las escalas para colores, ejes…. Por ejemplo,
una versión del gráfico anterior usando el logarítmo de los números en
el eje x podría ayudar a una mejor interpretación de los números más
pequeños:</li>
</ul><div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>, color<span class="op">=</span><span class="st">'species_id'</span>))</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="op">+</span> p9.xlab(<span class="st">"Weight (g)"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="op">+</span> p9.scale_x_log10()</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_log_plot.png" alt="png" class="figure mx-auto d-block"></figure><ul><li>También puedes escoger un tema (<code>theme_*</code>) o algunos
elementos específicos del tema (<code>theme</code>). Por lo general, los
gráficos con fondo blanco parecen más legibles cuando se imprimen.
Entonces, podemos configurar el fondo a blanco usando la función
<code>theme_bw()</code> y cambiar el tamaño del texto con
<code>theme()</code>.</li>
</ul><div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>, color<span class="op">=</span><span class="st">'species_id'</span>))</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="op">+</span> p9.xlab(<span class="st">"Weight (g)"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>    <span class="op">+</span> p9.scale_x_log10()</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>    <span class="op">+</span> p9.theme_bw()</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    <span class="op">+</span> p9.theme(text<span class="op">=</span>p9.element_text(size<span class="op">=</span><span class="dv">16</span>))</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_white_plot.png" alt="png" class="figure mx-auto d-block"></figure><div id="desafío---retocando-un-gráfico-de-barras" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío---retocando-un-gráfico-de-barras" class="callout-inner">
<h3 class="callout-title">Desafío - retocando un gráfico de barras</h3>
<div class="callout-content">
<p>Usa el código del ejercicio anterior y cambia la estética de color
por la variable <code>sex</code>, también cambia la geometría para tener
un gráfico de barras, finalmente, cambia la escala <code>scale</code>
del color de relleno para que tengas una barra azul y una naranja usando
<code>blue</code> y <code>orange</code> (mira este link en inglés de la
referencia <a href="https://plotnine.readthedocs.io/en/stable/api.html#Color-and-fill-scales" class="external-link">API
reference plotnine</a> para encontrar la función que necesitas).</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Respuestas
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'plot_id'</span>,</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>                          fill<span class="op">=</span><span class="st">'sex'</span>))</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>    <span class="op">+</span> p9.geom_bar()</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>    <span class="op">+</span> p9.scale_fill_manual([<span class="st">"blue"</span>, <span class="st">"orange"</span>])</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_challenge_color_bar.png" alt="png" class="figure mx-auto d-block"></figure></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="gráficos-de-distribuciones">Gráficos de distribuciones<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos-de-distribuciones"></a></h2>
<hr class="half-width"><p>Visualizar una distribución de datos es una tarea común en el
análisis y exploración de datos. Por ejemplo, para visualizar la
distribución de datos de la columna <code>weight</code> por cada especie
<code>species_id</code>, puedes usar una gráfica de caja:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'species_id'</span>,</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'weight'</span>))</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>    <span class="op">+</span> p9.geom_boxplot()</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_boxplot.png" alt="png" class="figure mx-auto d-block"></figure><p>Agregando los puntos a la gráfica de caja nos dá una mejor idea de la
distribución de las observaciones:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'species_id'</span>,</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'weight'</span>))</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="op">+</span> p9.geom_jitter(alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>    <span class="op">+</span> p9.geom_boxplot(alpha<span class="op">=</span><span class="fl">0.</span>)</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_point_boxplot.png" alt="png" class="figure mx-auto d-block"></figure><div id="desafío---distribuciones" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío---distribuciones" class="callout-inner">
<h3 class="callout-title">Desafío - distribuciones</h3>
<div class="callout-content">
<p>Los gráficos de caja son resúmenes útiles, pero ocultan la
<em>forma</em> de la distribución. Por ejemplo, si hay una distribución
bimodal, esto no se observaría con un gráfico de caja. Una alternativa
al gráfico de caja es el gráfico de violín, donde se dibuja la forma (de
la densidad de los puntos).</p>
<p>Al visualizar datos, es importante considerar la <em>escala</em> de
la observaciones. Por ejemplo, puede valer la pena cambiar la escala del
eje para distribuir mejor las observaciones en el espacio.</p>
<ul><li>Reemplaza el gráfico de caja con uno de violín, mira
<code>geom_violin()</code>
</li>
<li>Transforma la columna <code>weight</code> a la escala log10, mira
<code>scale_y_log10()</code>
</li>
<li>Agrega color a los puntos en tu gráfico de acuerdo a la parcela
donde la muestra fue tomada (<code>plot_id</code>).</li>
</ul><p>Sugerencia: Primero comprueba la clase de <code>plot_id</code>. Si
usas <code>factor()</code> dentro de la estética <code>aes</code>,
<code>plotnine</code> manejará los valores como categorías.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Respuestas
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'species_id'</span>,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'weight'</span>,</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>                          color<span class="op">=</span><span class="st">'factor(plot_id)'</span>))</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>    <span class="op">+</span> p9.geom_jitter(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>    <span class="op">+</span> p9.geom_violin(alpha<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">"0.7"</span>)</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>    <span class="op">+</span> p9.scale_y_log10()</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_challenge_boxplot.png" alt="png" class="figure mx-auto d-block"></figure></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="gráficos-de-series">Gráficos de series<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos-de-series"></a></h2>
<hr class="half-width"><p>Calculemos el número de cada tipo de especie por año. Para esto
primero tenemos que agrupar las especies (<code>species_id</code>) por
cada año <code>year</code>.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>yearly_counts <span class="op">=</span> surveys_complete.groupby([<span class="st">'year'</span>, <span class="st">'species_id'</span>])[<span class="st">'species_id'</span>].count()</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>yearly_counts</span></code></pre>
</div>
<p>Cuando revisamos los resultados del cálculo anterior, vemos que
<code>year</code> y <code>species_id</code> son índices de filas.
Podemos cambiar este indice para que sean usados como una variable de
columnas:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>yearly_counts <span class="op">=</span> yearly_counts.reset_index(name<span class="op">=</span><span class="st">'counts'</span>)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>yearly_counts</span></code></pre>
</div>
<p>Los gráficos de series se pueden visualizar usando líneas
(<code>geom_line</code>) con años en el eje <code>x</code> y el conteo
en el eje <code>y</code>.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>yearly_counts,</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'year'</span>,</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'counts'</span>))</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="op">+</span> p9.geom_line()</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>)</span></code></pre>
</div>
<p>Desafortunadamente eso no funciona, porque nos muestra todas las
especies juntas. Tenemos que especificar que queremos una línea para
cada especie. Esto se modifica en la función de estética conectando el
color con la variable <code>species_id</code>:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>yearly_counts,</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'year'</span>,</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'counts'</span>,</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>                          color<span class="op">=</span><span class="st">'species_id'</span>))</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>    <span class="op">+</span> p9.geom_line()</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_time_plot.png" alt="png" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="facetas">Facetas<a class="anchor" aria-label="anchor" href="#facetas"></a></h2>
<hr class="half-width"><p>Como cualquier biblioteca que maneje la gramática de gráficos,
<code>plotnine</code> tiene una técnica especial denominada
<em>faceting</em> que permite dividir el gráfico en múltiples gráficos
en función de una categoría incluida en el conjunto de datos.</p>
<p>¿Recuerdas el gráfico de puntos que creaste antes, usando
<code>weight</code> y <code>hindfoot_length</code>?</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>,</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'hindfoot_length'</span>,</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>                          color<span class="op">=</span><span class="st">'species_id'</span>))</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>)</span></code></pre>
</div>
<p>Podemos reusar este mismo código y agregar una faceta con
<code>facet_wrap</code> en base a una categoría para dividir el gráfico
para cada uno de los grupos, por ejemplo, usando la variable
<code>sex</code>:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>,</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'hindfoot_length'</span>,</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>                          color<span class="op">=</span><span class="st">'species_id'</span>))</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>    <span class="op">+</span> p9.facet_wrap(<span class="st">"sex"</span>)</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_facet_plot.png" alt="png" class="figure mx-auto d-block"></figure><p>Ahora podemos aplicar el mismo concepto con cualquier categoría:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>,</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'hindfoot_length'</span>,</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>                          color<span class="op">=</span><span class="st">'species_id'</span>))</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="op">+</span> p9.facet_wrap(<span class="st">"plot_id"</span>)</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_facet_all_plot.png" alt="png" class="figure mx-auto d-block"></figure><p>La capa de facetas <code>facet_wrap</code> divide los gráficos
arbitrariamente para que entren sin problemas en una hoja. Por otro lado
si quieres definir explícitamente la distribución de los gráficos usa
<code>facet_grid</code> con una fórmula (<code>rows ~ columns</code>) un
punto <code>.</code> indica que es sólo una fila o una columna.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># Selecciona unos años que te interesen</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>survey_2000 <span class="op">=</span> surveys_complete[surveys_complete[<span class="st">"year"</span>].isin([<span class="dv">2000</span>, <span class="dv">2001</span>])]</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>survey_2000,</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>,</span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'hindfoot_length'</span>,</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>                          color<span class="op">=</span><span class="st">'species_id'</span>))</span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point(alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a>    <span class="op">+</span> p9.facet_grid(<span class="st">"year ~ sex"</span>)</span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_select_plot.png" alt="png" class="figure mx-auto d-block"></figure><div id="desafío---facetas-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío---facetas-1" class="callout-inner">
<h3 class="callout-title">Desafío - facetas 1</h3>
<div class="callout-content">
<p>Crea un gráfico separado por cada especie, que muestre como el peso
medio de las especies cambia por año.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Respuestas
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>yearly_weight = surveys_complete.groupby([‘year’,
‘species_id’])[‘weight’].mean().reset_index()</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>yearly_weight,</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'year'</span>,</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>                          y<span class="op">=</span><span class="st">'weight'</span>))</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>    <span class="op">+</span> p9.geom_line()</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>    <span class="op">+</span> p9.facet_wrap(<span class="st">"species_id"</span>)</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío---facetas-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío---facetas-2" class="callout-inner">
<h3 class="callout-title">Desafío - facetas 2</h3>
<div class="callout-content">
<p>Usando el código del ejercicio anterior, compara visualmente como los
pesos de machos y hembras van cambiando en el tiempo. Crea un gráfico
separado por cada <code>sex</code> que use un color diferente por cada
especie <code>species_id</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Respuestas
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>yearly_weight = surveys_complete.groupby([‘year’, ‘species_id’,
‘sex’])[‘weight’].mean().reset_index()</p>
<p>(p9.ggplot(data=yearly_weight, mapping=p9.aes(x=‘year’, y=‘weight’,
color=‘species_id’)) + p9.geom_line() + p9.facet_wrap(“sex”) ) {:
.language-python}</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="más-retoques">Más retoques<a class="anchor" aria-label="anchor" href="#m%C3%A1s-retoques"></a></h2>
<hr class="half-width"><p>Como la sintaxis de <code>plotnine</code> sigue la versión original
del paquete de R <code>ggplot2</code>, la documentación de
<code>ggplot2</code> te dá mas información e inspiración para retocar
tus gráficos. Mira la hoja resumen de <code>ggplot2</code> <a href="https://www.rstudio.com/wp-content/uploads/2015/08/ggplot2-cheatsheet.pdf" class="external-link">cheat
sheet</a>, y piensa de que maneras puedes mejorar el gráfico. Puedes
escribir tus ideas y comentarios en el Etherpad.</p>
<p>Las opciones temáticas nos proveen una gran variedad de adaptaciones
visuales. Usa el siguiente ejemplo de un gráfico de barras que presenta
las observaciones por año.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'factor(year)'</span>))</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_bar()</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_overlap_bars.png" alt="png" class="figure mx-auto d-block"></figure><p>Aquí hemos usado el año <code>year</code> como una categoría usando
la función <code>factor</code>. Pero al hacer esto, las etiquetas de los
años se sobreponen. Usando una opción <code>theme</code> podemos rotar
las etiquetas en el eje x:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'factor(year)'</span>))</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_bar()</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    <span class="op">+</span> p9.theme_bw()</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    <span class="op">+</span> p9.theme(axis_text_x <span class="op">=</span> p9.element_text(angle<span class="op">=</span><span class="dv">90</span>))</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_good_bars.png" alt="png" class="figure mx-auto d-block"></figure><p>Cuando encuentres las opciones de visualización que te agraden y
forman parte del tema, puedes guardar estas opciones en un objeto para
luego reusarlo en los próximos gráficos que vayas a crear.</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>my_custom_theme <span class="op">=</span> p9.theme(axis_text_x <span class="op">=</span> p9.element_text(color<span class="op">=</span><span class="st">'grey'</span>, size<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>                                                         angle<span class="op">=</span><span class="dv">90</span>, hjust<span class="op">=</span><span class="fl">.5</span>),</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>                           axis_text_y <span class="op">=</span> p9.element_text(color<span class="op">=</span><span class="st">'grey'</span>, size<span class="op">=</span><span class="dv">10</span>))</span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>(p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'factor(year)'</span>))</span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>    <span class="op">+</span> p9.geom_bar()</span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a>    <span class="op">+</span> my_custom_theme</span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a>)</span></code></pre>
</div>
<figure><img src="fig/06_theme_plot.png" alt="png" class="figure mx-auto d-block"></figure><blockquote>
<h3 id="desafío---hecho-a-medida">Desafío - hecho a medida</h3>
</blockquote>
<p>Tómate otros cinco minutos para mejorar uno de los gráficos
anteriores, o crea un nuevo gráfico hecho a medida, con los retoques que
quieras.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Aquí hay algunas ideas:</p>
<ul><li>Intenta cambiar el grosor de las lineas en el gráfico de línea.</li>
<li>¿Podrías cambiar la leyenda y sus etiquetas?</li>
<li>Usa una paleta de colores nueva (mira las opciones aquí <a href="https://www.cookbook-r.com/Graphs/Colors_(ggplot2)/" class="external-link">http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/</a>)</li>
</ul></div>
</div>
</div>
<p>Después de crear tu nuevo gráfico, puedes guardarlo en diferentes
formatos. También puedes cambiar las dimensiones, la resolución usando
<code>width</code>, <code>height</code> and <code>dpi</code>:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>my_plot <span class="op">=</span> (p9.ggplot(data<span class="op">=</span>surveys_complete,</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>           mapping<span class="op">=</span>p9.aes(x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>))</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>    <span class="op">+</span> p9.geom_point()</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>)</span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>my_plot.save(<span class="st">"scatterplot.png"</span>, width<span class="op">=</span><span class="dv">10</span>, height<span class="op">=</span><span class="dv">10</span>, dpi<span class="op">=</span><span class="dv">300</span>)</span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul><li>Las variables <code>data</code>, <code>aes</code> y
<code>geometry</code> son los elementos principales de un gráfico de
<code>plotnine</code>.</li>
<li>Con el operador <code>+</code>, se agregan elementos adicionales al
gráfico, por ejemplo <code>scale_*</code>, <code>theme_*</code>,
<code>xlab</code>, <code>ylab</code> y <code>facet_*</code>.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Capítulo previo y siguiente"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-loops-and-functions.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previo</a>
        <a class="chapter-link float-end" href="08-putting-it-all-together.html">Siguiente<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-loops-and-functions.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previo: Flujos de trabajo y
        </a>
        <a class="chapter-link float-end" href="08-putting-it-all-together.html" rel="next">
          Siguiente: Entrada de datos y...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>Esta lección está sujeta al <a href="CODE_OF_CONDUCT.html">Código de Conducta</a></p>
        <p>

        <a href="https://github.com/datacarpentry/python-ecology-lesson-es/edit/main/episodes/07-visualization-ggplot-python.md" class="external-link">Editar en GitHub</a>

	
        | <a href="https://github.com/datacarpentry/python-ecology-lesson-es/blob/main/CONTRIBUTING.md" class="external-link">Contribuir</a>
        | <a href="https://github.com/datacarpentry/python-ecology-lesson-es/" class="external-link">Fuente</a></p>
				<p><a href="https://github.com/datacarpentry/python-ecology-lesson-es/blob/main/CITATION" class="external-link">Cita</a> | <a href="mailto:team@carpentries.org">Contacto</a> | <a href="https://carpentries.org/about/" class="external-link">Acerca de</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Plantilla compartida bajo <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> por <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Construido con <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a> y <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Volver al inicio"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Volver</span> al inicio
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://datacarpentry.org/python-ecology-lesson-es/07-visualization-ggplot-python.html",
  "inLanguage": "es",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Creando gráficos con plotnine",
  "creativeWorkStatus": "active",
  "url": "https://datacarpentry.org/python-ecology-lesson-es/07-visualization-ggplot-python.html",
  "identifier": "https://datacarpentry.org/python-ecology-lesson-es/07-visualization-ggplot-python.html",
  "dateCreated": "2018-11-09",
  "dateModified": "2023-02-07",
  "datePublished": "2025-04-22"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

